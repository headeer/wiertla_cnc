{% comment %}
  Wiertla Stats Component
  A component to display stats and achievements for the Wiertla CNC Shopify theme.
{% endcomment %}

<div class="wiertla-stats">
  <div class="wiertla-stats__container">
    <div class="wiertla-stats__item">
      <img
        src="{{ 'image-36.png' | asset_url }}"
        alt="Wiertła"
        class="wiertla-stats__icon"
      >
      <div class="wiertla-stats__content">
        <div class="wiertla-stats__title" data-translate="wiertla_stats.tools_title">999+ WIERTEŁ CNC</div>
        <div class="wiertla-stats__text" data-translate="wiertla_stats.tools_text">
          Ponad 1000 wierteł CNC na stanie
        </div>
      </div>
    </div>
    <div class="wiertla-stats__item">
      <img
        src="{{ 'image-38.png' | asset_url }}"
        alt="Lata doświadczenia"
        class="wiertla-stats__icon"
      >
      <div class="wiertla-stats__content">
        <div class="wiertla-stats__title" data-translate="wiertla_stats.years_title">8 LAT NA RYNKU</div>
        <div class="wiertla-stats__text" data-translate="wiertla_stats.years_text">
          Budujemy silną pozycję jako dostawca narzędzi CNC
        </div>
      </div>
    </div>
    <div class="wiertla-stats__item">
      <img
        src="{{ 'image-24.png' | asset_url }}"
        alt="Jakość"
        class="wiertla-stats__icon"
      >
      <div class="wiertla-stats__content">
        <div class="wiertla-stats__title" data-translate="wiertla_stats.quality_title">NAJWYŻSZA JAKOŚĆ</div>
        <div class="wiertla-stats__text" data-translate="wiertla_stats.quality_text">
          Oferujemy markowe wiertła i dedykowane alternatywy
        </div>
      </div>
    </div>
  </div>
</div>
<div class="nav-section desktop">
  <div class="nav-container">
    <div class="nav-items">
      <div class="nav-item">
        <a
          href="#"
          class="nav-link"
          data-category="koronkowe"
        >
          <div class="nav-content">
            <div class="nav-image">
              <img
                src="{{ 'image-8.png' | asset_url }}"
                alt="Koronkowe"
                loading="lazy"
              >
            </div>
            <div class="nav-text">
              <div class="nav-label">WIERTŁA CNC</div>
              <div>Koronkowe</div>
            </div>
          </div>
        </a>
      </div>
      <div class="nav-item">
        <a
          href="#"
          class="nav-link"
          data-category="plytkowe"
        >
          <div class="nav-content">
            <div class="nav-image">
              <img
                src="{{ 'image-9.png' | asset_url }}"
                alt="Płytkowe"
                loading="lazy"
              >
            </div>
            <div class="nav-text">
              <div class="nav-label">WIERTŁA CNC</div>
              <div>Płytkowe</div>
            </div>
          </div>
        </a>
      </div>
      <div class="nav-item">
        <a
          href="#"
          class="nav-link"
          data-category="vhm"
        >
          <div class="nav-content">
            <div class="nav-image">
              <img
                src="{{ 'image-12.png' | asset_url }}"
                alt="VHM"
                loading="lazy"
              >
            </div>
            <div class="nav-text">
              <div class="nav-label">WIERTŁA CNC</div>
              <div>VHM</div>
            </div>
          </div>
        </a>
      </div>
      <div class="nav-item">
        <a
          href="#"
          class="nav-link"
          data-category="sandvik"
        >
          <div class="nav-content">
            <div class="nav-image">
              <img
                src="{{ 'image-10.png' | asset_url }}"
                alt="SanDavik 880"
                loading="lazy"
              >
            </div>
            <div class="nav-text">
              <div class="nav-label">WIERTŁA CNC</div>
              <div>SanDavik 880</div>
            </div>
          </div>
        </a>
      </div>
      <div class="nav-item">
        <a
          href="#"
          class="nav-link"
          data-category="amec"
        >
          <div class="nav-content">
            <div class="nav-image">
              <img
                src="{{ 'image-11.png' | asset_url }}"
                alt="AMEC"
                loading="lazy"
              >
            </div>
            <div class="nav-text">
              <div class="nav-label">WIERTŁA CNC</div>
              <div>AMEC</div>
            </div>
          </div>
        </a>
      </div>
      <div class="nav-item">
        <a
          href="#"
          class="nav-link"
          data-category="ksem"
        >
          <div class="nav-content">
            <div class="nav-image">
              <img
                src="{{ 'image-13.png' | asset_url }}"
                alt="KSEM"
                loading="lazy"
              >
            </div>
            <div class="nav-text">
              <div class="nav-label">WIERTŁA CNC</div>
              <div>KSEM</div>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>
</div>
<!-- Add this after wiertla-stats -->
<div class="wiertla-categories-mobile-types">
  <div class="wiertla-categories-mobile-types__container">
    <div class="wiertla-categories-mobile-types__item" data-category="koronkowe">
      <img
        class="wiertla-categories-mobile-types__icon"
        src="{{ 'koronkowe_small.png' | asset_url }}"
        alt="Koronkowe"
      >
      <div class="wiertla-categories-mobile-types__content">
        <div class="wiertla-categories-mobile-types__label">WIERTŁA CNC</div>
        <div class="wiertla-categories-mobile-types__name">Koronkowe</div>
      </div>
    </div>

    <div class="wiertla-categories-mobile-types__item" data-category="plytkowe">
      <img
        class="wiertla-categories-mobile-types__icon"
        src="{{ 'plytkowe_small.png' | asset_url }}"
        alt="Płytkowe"
      >
      <div class="wiertla-categories-mobile-types__content">
        <div class="wiertla-categories-mobile-types__label">WIERTŁA CNC</div>
        <div class="wiertla-categories-mobile-types__name">Płytkowe</div>
      </div>
    </div>

    <div class="wiertla-categories-mobile-types__item" data-category="vhm">
      <img
        class="wiertla-categories-mobile-types__icon"
        src="{{ 'vhm_small.png' | asset_url }}"
        alt="VHM"
      >
      <div class="wiertla-categories-mobile-types__content">
        <div class="wiertla-categories-mobile-types__label">WIERTŁA CNC</div>
        <div class="wiertla-categories-mobile-types__name">VHM</div>
      </div>
    </div>

    <div class="wiertla-categories-mobile-types__item" data-category="sandvik">
      <img
        class="wiertla-categories-mobile-types__icon"
        src="{{ 'sandavik_small.png' | asset_url }}"
        alt="SanDavik 880"
      >
      <div class="wiertla-categories-mobile-types__content">
        <div class="wiertla-categories-mobile-types__label">WIERTŁA CNC</div>
        <div class="wiertla-categories-mobile-types__name">SanDavik 880</div>
      </div>
    </div>

    <div class="wiertla-categories-mobile-types__item" data-category="amec">
      <img
        class="wiertla-categories-mobile-types__icon"
        src="{{ 'amec_small.png' | asset_url }}"
        alt="AMEC"
      >
      <div class="wiertla-categories-mobile-types__content">
        <div class="wiertla-categories-mobile-types__label">WIERTŁA CNC</div>
        <div class="wiertla-categories-mobile-types__name">AMEC</div>
      </div>
    </div>

    <div class="wiertla-categories-mobile-types__item" data-category="ksem">
      <img
        class="wiertla-categories-mobile-types__icon"
        src="{{ 'ksem_small.png' | asset_url }}"
        alt="KSEM"
      >
      <div class="wiertla-categories-mobile-types__content">
        <div class="wiertla-categories-mobile-types__label">WIERTŁA CNC</div>
        <div class="wiertla-categories-mobile-types__name">KSEM</div>
      </div>
    </div>
  </div>
</div>
<!-- Latest Products Section -->
<div class="latest-products">
  <div class="latest-products__title" data-translate="wiertla_stats.latest_products.title">
    NAJNOWSZE W NASZEJ OFERCIE
  </div>
  <div class="latest-products__subtitle" data-translate="wiertla_stats.latest_products.subtitle">
    Stale poszerzamy nasz asortyment, aktualizując ofertę o nowe modele wierteł CNC
  </div>

  <div class="latest-products__swiper swiper">
    <div class="swiper-wrapper">
      {% assign all_products = collections.all.products | sort: 'created_at' | reverse %}
      {% assign latest_with_images_shown = 0 %}
      {% for product in all_products limit: 50 %}
        {%- comment -%}
          Show only products that have a real image AND are available. Skip items without any media/images or out of stock.
        {%- endcomment -%}
        {% unless product.featured_media or product.featured_image or product.images.size > 0 %}
          {% continue %}
        {% endunless %}
        
        {%- comment -%} Skip products that are not available {%- endcomment -%}
        {% unless product.available %}
          {% continue %}
        {% endunless %}
        {% assign sku_prefix = product.first_available_variant.sku | slice: 0, 2 %}
        {% assign icon_url = '' %}

        {% if sku_prefix == 'VW' %}
          {% assign icon_url = 'image-8.png' | asset_url %}
        {% elsif sku_prefix == 'PR' %}
          {% assign icon_url = 'image-10.png' | asset_url %}
        {% elsif sku_prefix == 'WW' %}
          {% assign icon_url = 'image-12.png' | asset_url %}
        {% elsif sku_prefix == 'PS' %}
          {% assign icon_url = 'image-9.png' | asset_url %}
        {% elsif sku_prefix == 'WK' %}
          {% assign icon_url = 'image-13.png' | asset_url %}
        {% elsif sku_prefix == 'WV' %}
          {% assign icon_url = 'image-11.png' | asset_url %}
        {% elsif sku_prefix == 'IS' %}
          {% assign icon_url = 'image-14.png' | asset_url %}
        {% elsif sku_prefix == 'WA' %}
          {% assign icon_url = 'image-15.png' | asset_url %}
        {% else %}
          {% assign icon_url = 'image-8.png' | asset_url %}
        {% endif %}
        <div class="swiper-slide">
          <a
            href="{{ product.url }}"
            class="product-card"
            aria-label="{{ product.title }}"
            data-condition="{{ product.metafields.custom.condition }}"
          >
            {%- comment -%} Hero image above top row {%- endcomment -%}
            {%- assign hero_src = nil -%}
            {%- if product.featured_media and product.featured_media.preview_image -%}
              {%- assign hero_src = product.featured_media.preview_image | image_url: width: 320 -%}
            {%- elsif product.images and product.images.size > 0 -%}
              {%- assign hero_src = product.images.first | image_url: width: 320 -%}
            {%- endif -%}
            <div class="product-card__hero{% if hero_src == icon_url %} product-card__hero--placeholder{% endif %}">
              <img
                src="{{ hero_src }}"
                alt="{{ product.title | escape }}"
                class="product-card__hero-image"
                loading="lazy"
                {% if hero_src == icon_url %}data-is-placeholder="true"{% endif %}
                data-handle="{{ product.handle }}"
              >
            </div>
            <div class="product-card__top">
              <div class="product-card__image-container">
                {%- comment -%} Use real product thumbnail if available; fallback to icon {%- endcomment -%}
                {%- assign thumb_src = nil -%}
                {%- if product.featured_media and product.featured_media.preview_image -%}
                  {%- assign thumb_src = product.featured_media.preview_image | image_url: width: 34 -%}
                {%- elsif product.images and product.images.size > 0 -%}
                  {%- assign thumb_src = product.images.first | image_url: width: 34 -%}
                {%- else -%}
                  {%- assign thumb_src = icon_url -%}
                {%- endif -%}
                <div class="product-card__image-placeholder" role="img" aria-label="{{ 'products.product.no_image' | t }}">
                  <img
                    src="{{ thumb_src }}"
                    alt="{{ product.title | escape }}"
                    class="product-card__image"
                    width="34"
                    height="34"
                    loading="lazy"
                  >
                </div>
              </div>
              <div class="product-card__fi" aria-label="{{ 'products.product.diameter' | t }}">
                <span class="mobile-label">Fi ⌀</span>
                <span class="mobile-value">
                  {%- assign fi_value = product.metafields.custom.srednica
                    | default: product.metafields.custom.fi
                    | default: product.custom_srednica
                    | default: product.custom_fi
                    | default: ''
                  -%}
                  {%- if fi_value contains '-' -%}
                    {%- assign fi_parts = fi_value | split: '-' -%}
                    {{ fi_parts[0] | strip }}
                  {%- else -%}
                    {{ fi_value }}
                  {%- endif -%}
                </span>
              </div>
              <div class="product-card__dimension" aria-label="{{ 'products.product.dimension' | t }}">
                {{
                  product.metafields.custom.xd
                  | default: product.metafields.custom.custom_working_length
                  | default: product.metafields.custom.working_length
                  | default: ''
                }}
              </div>
            </div>

            <div class="product-card__symbol" aria-label="{{ 'products.product.symbol' | t }}">
              {{
                product.metafields.custom.kod_producenta
                | default: product.metafields.custom.symbol
                | default: product.sku
                | default: ''
              }}
            </div>

            <div class="product-card__bottom">
              <div class="product-card__vendor" aria-label="{{ 'products.product.vendor' | t }}">
                {{ product.metafields.custom.manufacturer | default: product.vendor | default: '' }}
              </div>
              <div class="product-card__price-container">
                <div class="product-card__price" aria-label="{{ 'products.product.price' | t }}">
                  {% if product.price_varies %}
                    {{ product.price_min | money }}
                  {% else %}
                    {{ product.price | money }}
                  {% endif %}
                </div>
                {% if product.metafields.custom.rent_tool %}
                  <div class="product-card__rent" aria-label="{{ 'products.product.rent_available' | t }}">
                    {{ 'wiertla_stats.rent_tool_text' | t }}
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="17"
                      height="12"
                      viewBox="0 0 17 12"
                      fill="none"
                      aria-hidden="true"
                    >
                      <path d="M10.5 12L9.1 10.55L12.65 7H0.5V5H12.65L9.1 1.45L10.5 0L16.5 6L10.5 12Z" fill="#112832" />
                    </svg>
                  </div>
                {% endif %}
              </div>
            </div>
          </a>
        </div>
        {% assign latest_with_images_shown = latest_with_images_shown | plus: 1 %}
        {% if latest_with_images_shown >= 8 %}
          {% break %}
        {% endif %}
      {% endfor %}
    </div>

    <div class="swiper-navigation">
      <div class="swiper-button-prev"></div>
      <div class="pagination-container">
        {% for i in (1..5) %}
          <div
            class="pagination-bar {% if forloop.first %}pagination-active{% else %}pagination-inactive{% endif %}"
            data-index="{{ forloop.index0 }}"
          ></div>
        {% endfor %}
      </div>
      <div class="swiper-button-next"></div>
    </div>
  </div>
</div>

<!-- Removed Wiertła wg TYP module per request -->

<!-- Rent Tools Section -->
<div class="rent-tools">
  <div class="rent-tools__lines"></div>
  <div class="rent-tools__content">
    <div class="rent-tools__title">
      <div class="rent-tools__title-line1" data-translate="wiertla_stats.rent_tools.title">WYPOŻYCZ WIERTŁA CNC</div>
      <div class="rent-tools__title-line2" data-translate="wiertla_stats.rent_tools.subtitle">
        na dogodnych warunkach
      </div>
    </div>
    <div
      class="rent-tools__icon"
      style="display: flex; justify-content: center; align-items: center; margin: 20px auto;"
    >
      <img
        src="{{ 'icons_rent.png' | asset_url }}"
        alt="Rent Icon"
        class="rent-tools__icon-image"
        style="max-width: 100%; height: auto; display: block; margin: 0 auto;"
      >
    </div>
    <div class="rent-tools__description" data-translate="wiertla_stats.rent_tools.description">
      Stale podnosząc jakość i komfort korzystania z naszej oferty, umożliwiamy wypożyczenie wierteł CNC.
    </div>
    <a href="/pages/wypozycz" class="rent-tools__button">
      <span data-translate="wiertla_stats.rent_tools.learn_more">Dowiedz się więcej</span>
      <img
        src="{{ 'Refresh_24dp_5F6368_FILL0_wght400_GRAD0_opsz.svg' | asset_url }}"
        alt="Strzałka"
        class="rent-tools__arrow"
      >
    </a>
  </div>
</div>

<!-- FAQ Section -->
<div class="faq">
  <div class="faq__container">
    <div class="faq__columns">
      <!-- First Column -->
      <div class="faq__column">
        <div class="faq__main-title" data-translate="wiertla_stats.faq.main_title">WIERTŁA CNC - FAQ</div>

        <div class="faq__item">
          <div class="faq__title" data-translate="wiertla_stats.faq.question1.title">
            1. Jakie wiertła CNC wybrać do metalu?
          </div>
          <div class="faq__text">
            <span class="faq__bold" data-translate="wiertla_stats.faq.question1.subtitle1">Wiertła Koronkowe</span>:
            <span data-translate="wiertla_stats.faq.question1.text1"
              >Idealne do dużych otworów w metalu. Wiertła koronkowe charakteryzują się konstrukcją, która umożliwia
              wydajne i szybkie wiercenie nawet w twardych materiałach, minimalizując przy tym uszkodzenia obrabianego
              materiału. Są często stosowane w przemyśle budowlanym i mechanicznym</span
            >
            <br>
            <br>
            <span class="faq__bold" data-translate="wiertla_stats.faq.question1.subtitle2">Wiertła VHM</span>:
            <span data-translate="wiertla_stats.faq.question1.text2"
              >(Węglik Spiekany): Wytrzymałe i długowieczne, doskonałe do twardych metali. Wiertła wykonane z węglika
              spiekanego cechują się wyjątkową twardością i odpornością na zużycie, co sprawia, że są idealne do
              wiercenia w trudnych i wymagających warunkach. Są powszechnie używane w branżach, gdzie precyzja i
              trwałość narzędzi są kluczowe.</span
            >
          </div>
        </div>
      </div>

      <!-- Second Column -->
      <div class="faq__column">
        <div class="faq__item">
          <div class="faq__title" data-translate="wiertla_stats.faq.question2.title">
            2. Czy wiertła Sandvik 880 są dobre do trudnych materiałów?
          </div>
          <div class="faq__text" data-translate="wiertla_stats.faq.question2.text">
            Tak, wiertła Sandvik 880 są znane ze swojej wydajności i wytrzymałości, co czyni je idealnym wyborem do
            trudnych materiałów. Wiertła te posiadają zaawansowaną geometrię i powłoki, które zwiększają ich żywotność i
            efektywność. Dzięki swojej konstrukcji, wiertła Sandvik 880 są w stanie pracować z dużą precyzją nawet w
            najtwardszych materiałach, co czyni je popularnym wyborem w przemyśle lotniczym i motoryzacyjnym.
          </div>
        </div>

        <div class="faq__item">
          <div class="faq__title" data-translate="wiertla_stats.faq.question4.title">
            4. Jakie są zastosowania wierteł płytkowych?
          </div>
          <div class="faq__text" data-translate="wiertla_stats.faq.question4.text">
            Wiertła płytkowe są wszechstronne i znajdują zastosowanie w wielu różnych dziedzinach. Idealnie nadają się
            do obróbki materiałów kompozytowych, metali kolorowych oraz tworzyw sztucznych. Dzięki swojej konstrukcji
            zapewniają wysoką precyzję i długą żywotność, co czyni je niezastąpionymi w przemyśle lotniczym,
            motoryzacyjnym oraz przy produkcji urządzeń elektronicznych.
          </div>
        </div>
      </div>

      <!-- Third Column -->
      <div class="faq__column">
        <div class="faq__item">
          <div class="faq__title" data-translate="wiertla_stats.faq.question3.title">
            3. Jakie są zalety wierteł KSEM?
          </div>
          <div class="faq__text" data-translate="wiertla_stats.faq.question3.text">
            Wiertła KSEM oferują innowacyjne rozwiązania, które zapewniają doskonałe rezultaty nawet w najtwardszych
            materiałach. Dzięki zaawansowanej technologii, wiertła te umożliwiają szybką i efektywną obróbkę,
            minimalizując przy tym czas przestoju maszyn. Wiertła KSEM są zaprojektowane z myślą o maksymalnej
            wydajności, co sprawia, że są one idealnym wyborem do produkcji masowej i zastosowań, gdzie precyzja jest
            kluczowa.
          </div>
        </div>

        <div class="faq__item">
          <div class="faq__title" data-translate="wiertla_stats.faq.question5.title">
            5. Dlaczego warto wybierać wiertła AMEC?
          </div>
          <div class="faq__text" data-translate="wiertla_stats.faq.question5.text">
            Wiertła AMEC są synonimem jakości i niezawodności w przemyśle. Dzięki zaawansowanej technologii produkcji,
            oferują one doskonałe rezultaty wiercenia w najtrudniejszych warunkach. Wiertła AMEC są projektowane z myślą
            o długiej żywotności i minimalnych kosztach eksploatacji, co sprawia, że są one idealnym wyborem do
            intensywnych zastosowań przemysłowych, takich jak obróbka metali, produkcja części precyzyjnych oraz prace
            montażowe.
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Category Descriptions Section -->
<div class="category-desc">
  <div class="category-desc__title" data-translate="wiertla_stats.category_desc.title">KATEGORIE WIERTEŁ</div>

  <div class="category-desc__container"></div>
  <div class="category-desc__columns">
    <!-- Column 1 -->
    <div class="category-desc__column">
      <div class="category-desc__item">
        <div class="category-desc__header">
          <img
            src="{{ 'image-36.png' | asset_url }}"
            loading="lazy"
            class="category-desc__icon"
            alt="Wiertła koronkowe"
          >
          <div class="category-desc__name" data-translate="wiertla_stats.category_desc.crown_drills.title">
            WIERTŁA KORONKOWE
          </div>
        </div>
        <div class="category-desc__text">
          <p data-translate="wiertla_stats.category_desc.crown_drills.text">
            Wiertła koronkowe są niezastąpione w pracach wymagających wiercenia dużych otworów. Nasza oferta obejmuje
            wiertła koronkowe o różnych średnicach, które doskonale sprawdzają się zarówno w metalu, jak i w betonie.
            Ich zaawansowana konstrukcja zapewnia szybkie i wydajne wiercenie z minimalnym uszkodzeniem obrabianego
            materiału. Idealne do zastosowań budowlanych i przemysłowych, wiertła koronkowe są niezawodnym wyborem dla
            profesjonalistów.
          </p>
        </div>
      </div>

      <div class="category-desc__item">
        <div class="category-desc__header">
          <img
            src="{{ 'image-37.png' | asset_url }}"
            loading="lazy"
            class="category-desc__icon"
            alt="SanDavik 880"
          >
          <div class="category-desc__name" data-translate="wiertla_categories.sandvik">SanDavik 880</div>
        </div>
        <div class="category-desc__text">
          <p data-translate="wiertla_stats.category_desc.sandvik_drills.text">
            Wiertła Sandvik 880 to synonim jakości i niezawodności. Zaprojektowane z myślą o najwyższej wydajności,
            wiertła te są doskonałe do wiercenia w najtwardszych materiałach. Ich zaawansowana geometria i powłoki
            ochronne zapewniają długą żywotność i stabilność pracy. Idealne do zastosowań przemysłowych, wiertła Sandvik
            880 są świadomym wyborem profesjonalistów na całym świecie.
          </p>
        </div>
      </div>
    </div>

    <!-- Column 2 -->
    <div class="category-desc__column">
      <div class="category-desc__item">
        <div class="category-desc__header">
          <img
            src="{{ 'image-38.png' | asset_url }}"
            loading="lazy"
            class="category-desc__icon"
            alt="Wiertła PŁYTKOWE"
          >
          <div class="category-desc__name" data-translate="wiertla_categories.plate">Wiertła PŁYTKOWE</div>
        </div>
        <div class="category-desc__text">
          <p data-translate="wiertla_stats.category_desc.plate_drills.text">
            Wiertła płytkowe zapewniają niezrównaną precyzję i trwałość. Dzięki swojej konstrukcji, doskonale nadają się
            do obróbki materiałów kompozytowych i metali kolorowych. Wiertła płytkowe oferują stabilność i dokładność,
            co jest niezbędne w precyzyjnych pracach obróbczych. W naszej ofercie znajdziesz szeroki wybór wierteł
            płytkowych, które sprostają nawet najbardziej wymagającym zadaniom.
          </p>
        </div>
      </div>

      <div class="category-desc__item">
        <div class="category-desc__header">
          <img
            src="{{ 'image-39.png' | asset_url }}"
            loading="lazy"
            class="category-desc__icon"
            alt="Wiertła AMEC"
          >
          <div class="category-desc__name" data-translate="wiertla_categories.amec">Wiertła AMEC</div>
        </div>
        <div class="category-desc__text">
          <p data-translate="wiertla_stats.category_desc.amec_drills.text">
            Specjalistyczne wiertła AMEC to narzędzia o najwyższej precyzji, przeznaczone do zastosowań przemysłowych.
            Dzięki zaawansowanej technologii produkcji, wiertła te oferują doskonałe rezultaty nawet w najbardziej
            wymagających warunkach. Nasza oferta obejmuje szeroki wybór wierteł AMEC, które sprostają wszelkim potrzebom
            obróbczych.
          </p>
        </div>
      </div>
    </div>

    <!-- Column 3 -->
    <div class="category-desc__column">
      <div class="category-desc__item">
        <div class="category-desc__header">
          <img
            src="{{ 'image-40.png' | asset_url }}"
            loading="lazy"
            class="category-desc__icon"
            alt="Wiertła VHM"
          >
          <div class="category-desc__name" data-translate="wiertla_categories.vhm">
            Wiertła VHM
            <span class="category-desc__subtitle">(Węglik Spiekany)</span>
          </div>
        </div>
        <div class="category-desc__text">
          <p data-translate="wiertla_stats.category_desc.vhm_drills.text">
            Wiertła VHM, wykonane z węglika spiekanego, to narzędzia o wyjątkowej trwałości i wydajności. Są one idealne
            do intensywnych prac obróbczych w trudnych warunkach. Wiertła VHM cechują się wysoką odpornością na zużycie,
            co gwarantuje długą żywotność narzędzia i mniejsze przestoje w produkcji. Sprawdzą się doskonale w przemyśle
            metalowym i narzędziowym.
          </p>
        </div>
      </div>

      <div class="category-desc__item">
        <div class="category-desc__header">
          <img
            src="{{ 'image-41.png' | asset_url }}"
            loading="lazy"
            class="category-desc__icon"
            alt="Wiertła KSEM"
          >
          <div class="category-desc__name" data-translate="wiertla_categories.ksem">Wiertła KSEM</div>
        </div>
        <div class="category-desc__text">
          <p data-translate="wiertla_stats.category_desc.ksem_drills.text">
            Innowacyjne wiertła KSEM zapewniają doskonałe rezultaty wiercenia, nawet w najtwardszych materiałach. Dzięki
            unikalnym rozwiązaniom konstrukcyjnym, wiertła KSEM umożliwiają szybkie i efektywne wiercenie, minimalizując
            przy tym czas przestoju maszyn. Są one idealnym wyborem do produkcji masowej i precyzyjnych prac obróbczych.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
{% schema %}
{
  "name": "Wiertla Stats",
  "settings": [
    {
      "type": "collection",
      "id": "featured_collection",
      "label": "Featured Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 3,
      "max": 12,
      "step": 1,
      "default": 5,
      "label": "Number of products to show"
    },
    {
      "type": "url",
      "id": "rent_tools_link",
      "label": "Rent Tools Link"
    }
  ],
  "presets": [
    {
      "name": "Wiertla Stats",
      "category": "Custom Components"
    }
  ]
}
{% endschema %}
{% stylesheet %}
  .wiertla-stats {
    background-color: #f5f5f8;
    padding: 60px 0;
  }
  .drill-stats-table {
    align-self: stretch;
  }

  .stats-section {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 1.25rem;
    background-color: rgb(243 244 246);
    padding: 60px 16rem;
  }

  .stat-group {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 1.25rem;
  }

  .stat-cell {
    display: flex;
    align-items: center;
    gap: 1.25rem;
  }

  .stat-icon {
    height: 8rem;
    width: 8rem;
    flex-shrink: 0;
    object-fit: cover;
    object-position: center;
  }

  .stat-content {
    display: flex;
    width: 20rem;
    flex-shrink: 0;
    flex-direction: column;
    gap: 0.625rem;
  }

  .stat-title {
    font-family: 'League Spartan', sans-serif;
    font-size: 1.125rem;
    font-weight: 700;
    text-transform: uppercase;
    line-height: 17px;
    letter-spacing: 0.96px;
  }

  .stat-description {
    width: 15rem;
  }

  .nav-section {
    height: 5rem;
    flex-shrink: 0;
  }

  .nav-container {
    margin-bottom: -0.125rem;
    display: flex;
    height: 5rem;
    flex-shrink: 0;
    align-items: center;
    justify-content: center;
    border-top: 2px dashed rgb(228 228 231);
    background-color: rgb(243 244 246);
    padding: 1.125rem 18rem 1.25rem 16rem;
  }

  .nav-items {
    display: flex;
    flex-wrap: nowrap;
    align-items: center;
    justify-content: space-between;
    gap: 3.75rem 1.25rem;
    flex-grow: 1;
    padding-top: 0.125rem;
  }
  .rent-tools__title-line1,
  .rent-tools__title-line2 {
    font-family: 'League Spartan', sans-serif;
    font-weight: 700;
    font-size: 18px;
    line-height: 16.6px;
    letter-spacing: 0.06em;
    text-align: center;
    text-transform: uppercase;
    color: #112832;
  }
  .nav-item {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.625rem;
  }

  .nav-link {
    text-decoration: none;
    color: inherit;
    cursor: pointer;
  }

  .nav-link:not(.active) {
    text-decoration: none;
  }

  .nav-content {
    flex-grow: 1;
    max-width: 8.5rem;
    display: flex;
    flex-direction: row;
  }
  .nav-content > div {
    font-family: 'Montserrat';
    font-weight: 500;
    font-size: 16px;
    line-height: 22px;
    letter-spacing: 0.03em;
  }
  .nav-content .nav-label {
    font-size: 0.75rem;
    font-weight: 700;
    line-height: 1rem;
    letter-spacing: 0.16px;
    font-family: 'Montserrat';
    font-weight: 700;
    font-size: 12px;
    line-height: 16px;
    letter-spacing: 0.01em;
    text-decoration: none;
  }

  @media (min-width: 1910px) {
    .stats-section,
    .nav-items {
      flex-wrap: nowrap;
    }
  }

  @media (max-width: 1909px) {
    .stats-section,
    .nav-container {
      padding-left: 1rem;
      padding-right: 1rem;
    }
  }
  .wiertla-stats__container {
    max-width: 1420px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    gap: 20px;
  }

  .wiertla-stats__item {
    display: flex;
    gap: 20px;
  }

  .wiertla-stats__icon {
    width: 128px;
    height: 128px;
    flex-shrink: 0;
    object-fit: cover;
  }

  .wiertla-stats__content {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-width: 320px;
  }

  .wiertla-stats__title {
    font-family: 'League Spartan';
    font-size: 18px;
    font-weight: 700;
    line-height: 17px;
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }

  .wiertla-stats__text {
    font-family: 'Montserrat';
    font-size: 16px;
    font-weight: 500;
    line-height: 22px;
    letter-spacing: 0.06em;
    color: #112832;
  }

  @media (max-width: 1024px) {
    .wiertla-stats__container {
      flex-direction: column;
      align-items: center;
      padding: 0 32px;
    }
  }

  @media (max-width: 768px) {
    .wiertla-stats__container {
      padding: 0 16px;
    }

    .wiertla-stats__item {
      flex-direction: row;
      align-items: center;
      text-align: center;
    }
  }

  /* Latest Products Section */
  .latest-products {
    max-width: 1440px;
    margin: 0 auto;
    padding: 0 12px;
    position: relative;
  }

  .latest-products__title {
    font-family: 'League Spartan';
    padding-top: 60px;
    font-size: 18px;
    font-weight: 700;
    text-transform: uppercase;
    line-height: 17px;
    letter-spacing: 0.06em;
    color: black;
  }

  .latest-products__subtitle {
    padding-top: 10px;
    margin-bottom: 40px;
  }

  .latest-products__swiper {
    position: relative;
    overflow: hidden;
    margin: 0;
  }

  .product-card {
    width: 264px;
    height: auto;
    padding: 10px;
  }

  .product-card__hero {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 140px;
    overflow: hidden;
    margin-bottom: 6px;
    background: #fff;
  }
  .product-card__hero--placeholder {
    background: #F6F7F9;
  }
  .product-card__hero-image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    display: block;
  }

  .product-card__top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 34px;
    margin-bottom: 0;
  }

  .product-card__image-container {
    min-width: 34px;
    max-height: 34px;
    width: 34px;
    height: 34px;
    border: 2px solid #112832;
  }

  .product-card__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .product-card__fi {
    flex-grow: 1;
    height: 34px;
    display: flex;
    align-items: center;
    border: 2px solid #112832;
    border-left: 0;
    border-right: 0;
    padding: 4px 8px;
    font-size: 14px;
  }

  .product-card__dimension {
    flex-grow: 1;
    height: 34px;
    display: flex;
    align-items: center;
    border: 2px solid #112832;
    padding: 4px 12px;
    font-size: 14px;
  }

  .product-card__symbol {
    height: 34px;
    border: 2px solid #e5e7eb;
    border-top: 0;
    padding: 4px 8px;
    display: flex;
    align-items: center;
    font-size: 14px;
  }

  .product-card__bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 34px;
  }

  .product-card__vendor {
    flex-grow: 1;
    height: 34px;
    border-left: 2px solid #e5e7eb;
    border-bottom: 2px solid #e5e7eb;
    padding: 4px 8px;
    display: flex;
    align-items: center;
    font-size: 14px;
  }

  .product-card__price-container {
    display: flex;
    align-items: center;
    height: 34px;
    border: 2px solid #e5e7eb;
    border-top: 0;
    border-bottom-right-radius: 15px;
  }

  .product-card__price {
    padding: 0 12px;
    font-size: 14px;
  }

  .product-card__rent {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 2px 6px;
    border: 2px solid #112832;
    border-radius: 14px;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 0.01em;
    margin-right: 4px;
    background: white;
  }

  /* Swiper Navigation Styles */
  .swiper {
    padding: 0;
    margin-bottom: 40px;
  }

  /* Navigation Container */
  .swiper-navigation {
    position: relative;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 20px auto 0;
    max-width: 480px;
  }
  @media screen and (max-width: 768px) {
    .swiper-navigation {
      height: 43px;
      position: absolute;
      bottom: -13px;
      max-width: 100%;
    }
  }
  /* Swiper Navigation Styles */
  .swiper-button-next,
  .swiper-button-prev {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 10.79px;
    height: 18.33px;
    margin: 0;
    background: none;
    border: none;
  }
  .swiper-navigation .swiper-button-next,
  .swiper-navigation .swiper-button-prev {
    top: 100%;
  }
  .swiper-navigation .swiper-button-next:after,
  .swiper-navigation .swiper-button-prev:after {
    font-size: 14.33px;
    font-weight: bold;
    color: #112832;
  }
  @media screen and (max-width: 768px) {
    .swiper-button-next:after,
    .swiper-button-prev:after {
      font-size: 12px;
      font-weight: bold;
      color: #112832;
    }
    .swiper-button-next,
    .swiper-button-prev {
      top: 100%;
    }
  }

  .swiper-button-next {
    right: calc(50% - 80px);
  }

  .swiper-button-prev {
    left: calc(50% - 80px);
  }

  .swiper-button-disabled {
    opacity: 0.35;
  }

  /* Custom Pagination */
  .pagination-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 4px;
    width: 80%;
    margin: 0 auto;
  }

  .pagination-bar {
    flex: 1;
    height: 2px;
    background-color: #112832;
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .pagination-inactive {
    opacity: 0.2;
  }

  .pagination-active {
    opacity: 1;
    height: 4px;
  }

  /* Rent Tools Section Styles */
  .rent-tools {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    padding-top: 68px;
    width: 100%;
  }

  .rent-tools__content {
    position: relative;
    z-index: 2;
    border: 2px solid #e5e7eb;
    background: white;
    padding: 40px;
    text-align: center;
    max-width: 842px;
  }
  @media screen and (max-width: 1024px) {
    .rent-tools__content {
      max-width: 90vw;
      padding: 20px;
    }
  }
  .rent-tools__title {
    font-family: 'League Spartan';
    font-weight: 700;
    font-size: 18px;
    line-height: 16.6px;
    letter-spacing: 0.06em;
    text-align: center;
    text-transform: uppercase;
    margin-bottom: 8px;
  }

  .rent-tools__description {
    font-family: 'Montserrat';
    font-weight: 500;
    font-size: 16px;
    line-height: 22px;
    letter-spacing: 0.03em;
    text-align: center;
    margin: 11px 0;
    padding: 0 40px;
  }
  @media (max-width: 1024px) {
    .rent-tools__description {
      padding: 0;
    }
  }
  .rent-tools__button {
    font-family: 'League Spartan';
    font-weight: 700;
    font-size: 18px;
    line-height: 16.6px;
    letter-spacing: 0.06em;
    height: 50px;
    text-transform: uppercase;
    display: inline-flex;
    align-items: center;
    gap: 22px;
    background: #ffe500;
    border: 2px solid #112832;
    border-radius: 40px;
    padding: 8.5px 15px 8.5px 20px;
    margin-top: 12px;
    transition: background-color 0.3s ease;
    cursor: pointer;
  }

  .rent-tools__button:hover {
    background-color: #fcd34d;
  }

  .rent-tools__button img {
    width: 32px;
    height: 32px;
  }

  .rent-tools__lines {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    z-index: 1;
    border-bottom: 2px solid #e5e7eb;
  }

  .rent-tools__icons {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 24px 0;
    padding: 0 20px;
  }

  .rent-tools__icons-image {
    max-width: 100%;
    height: auto;
    object-fit: contain;
    transition: transform 0.3s ease;
  }

  .rent-tools__icons-image:hover {
    transform: scale(1.05);
  }

  @media (max-width: 768px) {
    .rent-tools__icons {
      margin: 16px 0;
    }

    .rent-tools__icons-image {
      max-width: 90%;
    }
  }

  /* FAQ Section Styles */
  .faq {
    padding-top: 56px;
  }

  .faq__container {
    background-color: #f5f5f8;
    padding: 60px 0;
  }
  .rent-tools__title-line1,
  .rent-tools__title-line2 {
    font-family: 'League Spartan', sans-serif;
    font-weight: 700;
    font-size: 18px;
    line-height: 16.6px;
    letter-spacing: 0.06em;
    text-align: center;
    text-transform: uppercase;
    color: #112832;
  }
  .faq__columns {
    max-width: 1420px;
    margin: 0 auto;
    display: flex;
    padding: 0 12px;
    gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .faq__column {
    flex: 1;
    min-width: 320px;
    max-width: 460px;
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .faq__column:nth-child(2),
  .faq__column:nth-child(3) {
    margin-top: 59px;
  }

  .faq__main-title {
    font-family: 'League Spartan', sans-serif;
    font-weight: 700;
    font-size: 18px;
    line-height: 16.6px;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: #112832;
    margin-bottom: 30px;
    text-align: left;
  }

  .faq__title {
    font-family: 'League Spartan', sans-serif;
    font-weight: 700;
    font-size: 18px;
    line-height: 24px;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: #112832;
    margin-bottom: 20px;
  }

  .faq__text {
    font-family: 'Montserrat', sans-serif;
    font-weight: 500;
    font-size: 16px;
    line-height: 22px;
    letter-spacing: 0.03em;
    color: #112832;
  }

  .faq__text strong {
    font-weight: 700;
  }

  .faq__bold {
    font-weight: 700;
  }

  @media (max-width: 1024px) {
    .faq__columns {
      padding: 0 32px;
    }

    .faq__column {
      min-width: 280px;
    }
  }

  @media (max-width: 768px) {
    .faq__columns {
      padding: 0 16px;
    }

    .faq__column {
      min-width: 100%;
    }
  }

  /* Category Descriptions Section */
  .category-desc {
    padding: 60px 12px;
  }

  .category-desc__title {
    font-family: 'League Spartan', sans-serif;
    font-weight: 700;
    font-size: 18px;
    line-height: 16.6px;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: #112832;
    margin-bottom: 30px;
  }

  .category-desc__container {
    max-width: 1420px;
    margin: 0 auto;
  }

  .category-desc__columns {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: space-between;
  }

  .category-desc__column {
    flex: 1;
    min-width: 320px;
    max-width: 458px;
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .category-desc__item {
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-height: 300px;
  }

  .category-desc__header {
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .category-desc__icon {
    width: 34px;
    height: 34px;
    object-fit: cover;
    flex-shrink: 0;
  }

  .category-desc__name {
    font-family: 'League Spartan', sans-serif;
    font-weight: 700;
    font-size: 18px;
    line-height: 16.6px;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: #112832;
  }

  .category-desc__subtitle {
    font-family: 'Montserrat';
    font-weight: 400;
    font-size: 16px;
    text-transform: none;
    text-decoration: none;
  }

  .category-desc__text {
    font-family: 'Montserrat', sans-serif;
    font-weight: 500;
    font-size: 16px;
    line-height: 22px;
    letter-spacing: 0.03em;
    color: #112832;
  }

  .category-desc__text strong {
    font-weight: 700;
  }

  @media (max-width: 1910px) {
    .category-desc__columns {
      flex-wrap: wrap;
    }
  }

  @media (max-width: 1024px) {
    .category-desc {
      padding: 40px 32px;
    }

    .category-desc__column {
      gap: 48px;
    }
  }

  @media (max-width: 768px) {
    .category-desc {
      padding: 30px 16px;
    }

    .category-desc__column {
      min-width: 100%;
      gap: 32px;
    }

    .category-desc__header {
      flex-wrap: wrap;
    }
  }
  .nav-content {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .nav-image {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .nav-image img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  .nav-text {
    display: flex;
    flex-direction: column;
    gap: 4px;
    text-decoration: none;
  }

  .nav-label {
    font-family: 'League Spartan', sans-serif;
    text-decoration: none;
    font-size: 12px;
    font-weight: 700;
    line-height: 100%;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: #112832;
  }

  .nav-text div:last-child {
    font-family: 'Montserrat', sans-serif;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    line-height: 100%;
    letter-spacing: 0.03em;
    color: #112832;
  }

  @media screen and (max-width: 768px) {
    .nav-content {
      gap: 10px;
    }

    .nav-image {
      width: 30px;
      height: 30px;
    }

    .nav-label {
      font-size: 10px;
    }

    .nav-text div:last-child {
      font-size: 12px;
    }
  }
{% endstylesheet %}

<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js" defer></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"/>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Check if Swiper is available before initializing
    if (typeof Swiper === 'undefined') {
      console.warn('Swiper library is not loaded. Skipping swiper initialization.');
      return;
    }

    const swiper = new Swiper('.latest-products__swiper', {
      loop: false,
      slidesPerView: 1,
      spaceBetween: 20,
      watchOverflow: true,
      observer: true,
      observeParents: true,

      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },

      breakpoints: {
        640: {
          slidesPerView: 2,
        },
        1024: {
          slidesPerView: 3,
        },
        1280: {
          slidesPerView: 4,
        },
        1536: {
          slidesPerView: 5,
        },
      },

      on: {
        init: function () {
          updatePaginationBars(this);
          updateNavigationButtons(this);
        },
        slideChange: function () {
          updatePaginationBars(this);
          updateNavigationButtons(this);
        },
        resize: function () {
          updatePaginationBars(this);
          updateNavigationButtons(this);
        },
      },
    });
    // Replace placeholder hero images with real featured images
    try {
      var container = document.querySelector('.latest-products__swiper .swiper-wrapper');
      if (container) {
        var imgs = container.querySelectorAll('.product-card__hero-image[data-is-placeholder="true"][data-handle]');
        imgs.forEach(function(imgEl){
          var handle = imgEl.getAttribute('data-handle');
          if (!handle) return;
          fetch('/products/' + handle + '.json')
            .then(function(r){ return r.ok ? r.json() : null; })
            .then(function(data){
              if (!data || !data.product) return;
              var p = data.product;
              var url = '';
              if (p.featured_image && p.featured_image.src) url = p.featured_image.src;
              else if (Array.isArray(p.images) && p.images.length) url = p.images[0].src || p.images[0];
              if (url) {
                imgEl.src = url;
                var hero = imgEl.closest('.product-card__hero');
                if (hero) hero.classList.remove('product-card__hero--placeholder');
                imgEl.setAttribute('data-is-placeholder','false');
              }
            })
            .catch(function(){});
        });
      }
    } catch(_) {}


    function updateNavigationButtons(swiper) {
      const nextButton = document.querySelector('.swiper-button-next');
      const prevButton = document.querySelector('.swiper-button-prev');

      // Calculate the maximum slide index based on total slides and slides per view
      const totalSlides = swiper.slides.length;
      const slidesPerView = swiper.params.slidesPerView;
      const maxSlideIndex = Math.max(0, totalSlides - slidesPerView);

      // Disable next button if we're at the last possible slide
      if (swiper.realIndex >= maxSlideIndex) {
        nextButton.style.opacity = '0.35';
        nextButton.style.pointerEvents = 'none';
      } else {
        nextButton.style.opacity = '1';
        nextButton.style.pointerEvents = 'auto';
      }

      // Disable prev button if we're at the first slide
      if (swiper.realIndex === 0) {
        prevButton.style.opacity = '0.35';
        prevButton.style.pointerEvents = 'none';
      } else {
        prevButton.style.opacity = '1';
        prevButton.style.pointerEvents = 'auto';
      }
    }

    function updatePaginationBars(swiper) {
      const paginationBars = document.querySelectorAll('.pagination-bar');
      const totalSlides = swiper.slides.length;
      const slidesPerView = swiper.params.slidesPerView;
      const currentSlide = swiper.realIndex;
      
      // Calculate total pages needed
      const totalPages = Math.ceil(totalSlides / slidesPerView);
      
      // Calculate which pagination bar should be active
      const currentPage = Math.floor(currentSlide / slidesPerView);
      
      // Debug logging
      console.log('Pagination Update:', {
        totalSlides,
        slidesPerView,
        currentSlide,
        currentPage,
        totalPages,
        paginationBarsCount: paginationBars.length
      });
      
      // Hide pagination bars that aren't needed
      paginationBars.forEach((bar, index) => {
        if (index < totalPages) {
          bar.style.display = 'block';
          if (index === currentPage) {
            bar.classList.add('pagination-active');
            bar.classList.remove('pagination-inactive');
          } else {
            bar.classList.remove('pagination-active');
            bar.classList.add('pagination-inactive');
          }
        } else {
          bar.style.display = 'none';
        }
      });
    }

    // Add click handlers for pagination bars
    const paginationBars = document.querySelectorAll('.pagination-bar');
    paginationBars.forEach((bar, index) => {
      bar.addEventListener('click', () => {
        const slidesPerView = swiper.params.slidesPerView;
        const targetSlide = index * slidesPerView;
        swiper.slideTo(targetSlide);
      });
    });
  });

  // Handle navigation link clicks for wiertla stats
  document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('.nav-link[data-category]');
    
    navLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Remove active class from all links
        navLinks.forEach(l => l.classList.remove('active'));
        
        // Add active class to clicked link
        this.classList.add('active');
        
        const category = this.getAttribute('data-category');
        
        // Activate wiertla main type and set category in main system
        activateWiertlaMainTypeAndCategory(category);
      });
    });
  });

  function activateWiertlaMainTypeAndCategory(category) {
    try {
      // Ensure WiertlaCNC object exists
      if (!window.WiertlaCNC) {
        window.WiertlaCNC = {};
      }
      
      // Set active tab type to 'wiertla'
      window.WiertlaCNC.activeTabType = 'wiertla';
      
      // Update URL parameter for main type
      const url = new URL(window.location.href);
      url.searchParams.set('mainType', 'wiertla');
      window.history.replaceState({}, '', url.toString());
      
      // Set the category in the main filter system
      if (!window.WiertlaCNC.filters) {
        window.WiertlaCNC.filters = {
          category: 'wszystkie',
          status: 'all',
          type: 'all',
          crown: 'all',
          manufacturer: 'all',
          page: 1,
          perPage: 100,
        };
      }
      
      // Map wiertla stats categories to wiertla categories
      const categoryMapping = {
        'koronkowe': 'koronkowe',
        'plytkowe': 'plytkowe',
        'vhm': 'vhm',
        'sandvik': 'sandvik',
        'amec': 'amec',
        'ksem': 'ksem'
      };
      
      const mappedCategory = categoryMapping[category] || 'wszystkie';
      window.WiertlaCNC.filters.category = mappedCategory;
      window.selectedCategory = mappedCategory;
      
      // Reset pagination
      window.WiertlaCNC.filters.page = 1;
      window.currentPage = 1;
      
      // Update URL parameters
      if (typeof updateUrlParams === 'function') {
        updateUrlParams();
      }
      
      // Apply filters if the function exists
      if (typeof applyFilters === 'function') {
        applyFilters();
      }
      
      // Update active states in main navigation
      updateMainNavigationActiveStates(mappedCategory);
      
    } catch (error) {
      console.error('Error activating wiertla main type and category:', error);
    }
  }

  function updateMainNavigationActiveStates(category) {
    try {
      // Remove active class from all category items in main navigation
      const mainCategoryItems = document.querySelectorAll('.wiertla-categories__icon-item');
      mainCategoryItems.forEach(item => {
        item.classList.remove('active');
      });
      
      // Add active class to the selected category
      const activeCategoryItem = document.querySelector(`.wiertla-categories__icon-item[data-category="${category}"]`);
      if (activeCategoryItem) {
        activeCategoryItem.classList.add('active');
      }
      
      // Update main type selector if it exists
      const mainTypeSelect = document.querySelector('select[name="mainType"]');
      if (mainTypeSelect) {
        mainTypeSelect.value = 'wiertla';
      }
      
    } catch (error) {
      console.error('Error updating main navigation active states:', error);
    }
  }
</script>
